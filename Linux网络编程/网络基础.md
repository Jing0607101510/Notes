# 网络基础

## 协议

协议是一组规则。



## BS和CS

|      |               优点               |                         缺点                          |
| :--: | :------------------------------: | :---------------------------------------------------: |
| C/S  | 1.协议灵活选择 <br /> 2.缓存数据 | 1.对用户的安全构成威胁<br />2.开发工作量较大,调试困难 |
| B/S  |             1.跨平台             |                      1.协议固定                       |



## 协议格式

### 数据包基本格式

[链路层首部--网络层首部--传输层首部--应用层首部--数据]

### IP段格式 和 TCP/UDP

- IP地址 32位 4字节 点分十进制
- TCP/UDP 端口号 16位 2字节



## 套接字

- 成对出现
- 需要绑定IP和端口号,对于服务器来说,需要显式绑定。对于客户端，可以由系统隐式绑定
- 一个文件描述符对应两个缓冲区，分别是读，写缓冲区，这两个缓冲区都在内核。



## CS模型

- 服务器端
  1. socket(), 建立套接字
  2. bind()，绑定IP和端口号
  3. listen(), 指定最大同时发起连接数
  4. accept()，阻塞等待客户端发起连接
  5. read()
  6. 操作
  7. write();
  8. close()关闭，回收资源
- 客户端
  1. socket()，建立套接字
  2. bind()，可以不调用
  3. connect()，发起连接
  4. write()
  5. read()
  6. close()



