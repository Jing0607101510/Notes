# 是什么

先来看看Docker的理念：

\*  将运用与运行的环境打包形成容器运行 ，运行可以伴随着容器，但是我们对数据的要求希望是持久化的

\*  容器之间希望有可能共享数据

Docker容器产生的数据，如果不通过docker commit生成新的镜像，使得数据做为镜像的一部分保存下来，

那么当容器删除后，数据自然也就没有了。

为了能保存数据在docker中我们使用卷。

# 做什么

**容器数据的持久化，容器间数据的共享**

卷就是目录或文件，存在于一个或多个容器中，由docker挂载到容器，但不属于联合文件系统，因此能够绕过Union File System提供一些用于持续存储或共享数据的特性：

 卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数据卷

特点：

1. 数据卷可在容器之间共享或重用数据

2. 卷中的更改可以直接生效

3. 数据卷中的更改不会包含在镜像的更新中

4. 数据卷的生命周期一直持续到没有容器使用它为止

# 添加数据卷

## 直接使用命令添加

``docker run -it -v 宿主机绝对路径:容器内目录[:ro] 镜像名``

ro:在容器中这个目录及其里面的文件只读。

## 通过dockerfile添加

- 在dockerfile中使用**VOLUME**指令来给**镜像**添加数据卷（不指定宿主机对应的目录）

- File构建

  - ```bash
    - - FROM centos
    	VOLUME ["/dataVolumeContainer1","/dataVolumeContainer2"]
        CMD echo "finished,--------success1"
        CMD /bin/bash
    ```

- ``docker build -f dockerfile -t 镜像名 .`` 产生新的镜像

- run容器



# 数据容器卷

## 是什么

命名的容器挂载数据卷，其它容器通过挂载这个(父容器)实现数据共享，挂载数据卷的容器，称之为数据卷容器。用于**容器间数据的共享**

## 步骤

1. 启动一个数据卷容器
2. 启动子容器 使用参数 --volumes-from 数据卷容器名

## 数据卷生命周期

容器之间配置信息的传递，数据卷的生命周期一直持续到没有容器使用它为止。

